<?xml version="1.0" encoding="UTF-8"?>
<sequence name="GetPolo1ObrasSequence" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <log description="Start Get Polo1 Obras Sequence" level="custom">
        <property name="message" value="Starting to get polo1 obras..."/>
    </log>
    <sequence key="Polo1ObrasSequence"/>
    <property description="Store Polo 1 Obras" expression="$body" name="obrasPolo1" scope="default" type="STRING"/>
    <clone>
        <target>
            <sequence>
                <sequence key="Polo2ObrasSequence"/>
                <payloadFactory description="Distinct(ISBN)" media-type="xml">
                    <format>
                        <Obras xmlns="">$1</Obras>
                    </format>
                    <args>
                        <arg evaluator="xml" expression="/*/Obra/ISBN[not(. = ../following-sibling::Obra/ISBN)]/parent::Obra"/>
                    </args>
                </payloadFactory>
                <property description="Store Polo 2 Obras" expression="$body" name="obrasPolo2" scope="default" type="STRING"/>
            </sequence>
        </target>
        <target>
            <sequence>
                <sequence key="Polo3ObrasSequence"/>
                <property description="Store Polo 3 Obras" expression="$body" name="obrasPolo3" scope="default" type="STRING"/>
            </sequence>
        </target>
    </clone>
    <log description="Finish Get Polo1 Obras Sequence" level="custom">
        <property name="message" value="Finished get polo1 obras..."/>
    </log>
</sequence>
